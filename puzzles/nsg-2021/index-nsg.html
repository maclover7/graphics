<!DOCTYPE html>
<head>
  <link href="style-static.css" type="text/css" rel="stylesheet" />
  <script>
    const puzzle = [
      [null, 'a', 't', 'l', 'a', 's', 't', null, 'm', 'e', 'l', 'l', 'o', 'n', null, 't'],
      [null, null, 'h', 'o', 'l', 'e', null, null, 'i', 't', 'o', null, 'n', null, 'r', 'a'],
      ['n', 'e', 'o', 'g', 'o', 't', 'h', 'i', 'c', null, null, 'a', 't', 'e', 'a', 'm'],
      ['a', 'l', 'r', 'i', 'g', 'h', 't', null, null, 'p', 'e', 'r', 'o', 'g', 'i', 'e'],
      ['i', 's', 'a', 'a', 'c', null, null, null, 'c', 'a', 'a', 'p', 'p', null, null, null],
      ['v', 'a', 'x', null, 'o', null, 'e', 'n', 'a', 'c', 't', null, null, null, 'd', 'a'],
      ['e', null, null, 'e', null, null, 'g', 'e', 'n', 'e', 'k', 'e', 'l', 'l', 'y', null],
      [null, null, 'r', 'u', 'e', null, 'o', 'w', 'e', null, 'e', null, 'i', null, 'a', 'l'],
      [null, 'h', 'e', 'i', 'n', 'z', null, null, 'm', 'e', 't', null, 'n', 'u', 'd', 'e'],
      ['d', 'o', 'n', 't', 's', 'i', 'g', 'n', null, null, 'o', 'd', 'd', null, null, 't'],
      [null, 'p', 'e', null, 'i', 'p', 'a', null, null, 'b', null, 'o', 'a', 't', 's', null],
      ['n', 'e', 'w', 'b', 's', null, 'd', 'b', null, 'a', 'k', 'g', null, 'i', 't', 's'],
      ['i', null, null, 'e', null, 'o', 'd', 'r', null, 'm', 'e', 'd', 'a', 'k', 'a', null],
      ['c', 'a', 'r', 'n', 'e', 'g', 'i', 'e', null, 'b', 'a', 'a', 'l', null, 't', null],
      ['h', 'i', 'a', 't', 'u', 's', null, 'e', 'p', 'o', 'n', 'y', 'm', 'o', 'u', 's'],
      ['e', 'r', 'g', 'o', null, null, 'o', 'd', 'i', 'o', 'u', 's', null, null, 's', null]

/*
      ['d', 'r', 'a', 'f', 't', null, 'c', 'u', 'm', 'l', 'a', 'u', 'd', 'e', null],
      ['r', 'e', 'v', 'i', 'e', 'w', null, 'd', 'i', 'e', 't', 'r', 'i', 'e', 'c', 'h'],
      [null, 'm', 'a', 'r', 'd', 'u', 'k', null, 'd', 'm', null, 'n', 'a', 'h', null],
      ['g', 'e', 't', null, null, 'p', 'o', 'l', 'i', 'o', null, 's', 'l', 'o', 'p'],
      ['a', 'd', 'a', 'm', 's', null, 'd', null, 's', 'n', 'l', null, 'u', null, 'e'],
      ['m', 'y', 'r', 'o', 'n', null, 'a', null, null, null, 'o', null, 'p', null, 'p'],
      ['e', null, 'a', 'l', 'a', 's', 'k', 'a', null, null, 'g', null, 'i', null, 't'],
      ['s', 'k', 'a', null, 'p', null, null, 'b', 'e', 'a', 'c', 'o', 'n', null, 'o'],
      [null, null, 'n', null, null, 'a', null, 'b', 'c', null, 'a', 'u', 't', 'o', null],
      [null, null, 'g', null, null, 'd', 'e', 'a', 'l', null, 'b', 't', 'e', 'a', 'm'],
      ['p', null, null, 'e', 'n', 'v', 'y', null, 'e', null, 'i', null, 'r', 'r', null],
      ['a', 's', 'l', null, 'o', 'e', 'r', null, 'c', 'a', 'n', 'o', 'n', null, 'b'],
      [null, 't', 'i', 'm', 'b', 'r', 'e', null, 't', 'i', null, 'n', 'e', 's', 't'],
      ['o', 'u', 't', 'l', 'e', 't', null, null, 'i', 'm', 'p', 'e', 't', 'u', 's'],
      ['i', 'd', 'e', 'a', 'l', 's', null, 'g', 'c', 's', 'e', 's', null, 'e', null],
*/
    ];

    const clues = {
      Across: [
        { number: "1", text: "", labelColumn: 1, highlightColumn: `3/7`}
        /*
        {number: "1", text: "Slapped a copyright on", labelColumn: 1, highlightColumn: `3/7`},
        {number: "5", text: "Ride in space, familiarly", labelColumn: 7},
        {number: "8", text: "The Pittsburgh Penguins' PPG Paints, for one", labelColumn: 11, hightlightColumn: `3/7`, highlightRow: 3},
        {number: "13", text: "Roman ___ (thinly veiled nonfiction)", labelColumn: 14, labelRow: 1, highlightColumn: `1/7`, highlightRow: 4},
        {number: "15", text: "Uncle, in SPAN 0101", labelColumn: 6, labelRow: 2, highlightColumn: `8/14`, highlightRow: 4},
        {number: "16", text: "Annoyed", labelColumn: 8, labelRow: 2, highlightColumn: `3/6`, highlightRow: 5},
        {number: "17", text: `Pitt mascot's favorite synonym for "says so"`, labelColumn: 2, labelRow: 3, highlightColumn: `9/14`, highlightRow: 5},
        {number: "19", text: "Houston ballplayer, like former Pitt pitcher Derek West", labelColumn: 9, labelRow: 3, highlightColumn: `1/5`, highlightColumn: 6},
        {number: "20", text: "You ___ study more", labelColumn: 12, labelRow: 3, highlightColumn: `6/11`, highlightRow: 6},
        {number: "22", text: "Next stop after playing for a Pitt sports team", labelColumn: 6, labelRow: 4, highlightColumn: `5/10`, highlightRow: 7},
        {number: "23", text: "Pitt mascot's favorite English afternoon appointment", labelColumn: 12, labelRow: 4, highlightColumn: `4/9`, highlightRow: 8},
        {number: "27", text: `Pitt's "Lifelong Learning Institute"`, labelColumn: 5, labelRow: 5, highlightColumn: `10/14`, highlightRow: 8},
        {number: "28", text: "Young U.S. Rep. from NY-14", labelColumn: 9, labelRow: 5, highlightRow: `1/6`, highlightRow: 9},
        {number: "29", text: "Singaporean engineering sch., and somewhere Pitt students frequently conduct research", labelColumn: 11, labelRow: 5, highlightColumn: `9/12`, highlightRow: 9},
        {number: "30", text: "But", labelRow: 6, labelColumn: 1},
        {number: "37", text: "Pitt mascot's favorite low-sugar drink", labelColumn: 6, labelRow: 9, highlightColumn: `1/7`, highlightRow: 10},
        {number: "40", text: "Smalls", labelColumn: 14, labelRow: 9, highlightColumn: `8/14`, highlightRow: 10},
        {number: "41", text: "__-Tac", labelColumn: 6, labelRow: 10, highlightColumn: `8/12`, highlightRow: 11},
        {number: "42", text: "Mess (with)", labelColumn: 7, labelRow: 10, highlightColumn: `1/9`, highlightRow: 12},
        {number: "43", text: "Aerodynamic", labelColumn: 11, labelRow: 10, highlightColumn: `8/14`, highlightRow: 13},
        {number: "45", text: "Pitt mascot's favorite tentacled Spider-Man villain", labelColumn: 4, labelRow: 11, highlightColumn: `8/14`, highlightRow: 13},
        {number: "50", text: "Something Pitt students do before final exams", labelColumn: 1, labelRow: 10, highlightColumn: `8/14`, highlightRow: 13},
        {number: "52", text: "Pitt Tonight host Andrew Dow's first jokes of the night", labelColumn: 9, labelRow: 12, highlightColumn: `8/14`, highlightRow: 13},
        {number: "53", text: `Game of Thrones's "Knight of Flowers"`, labelColumn: 12, labelRow: 12, highlightColumn: `8/14`, highlightRow: 13},
        {number: "55", text: "Pitt mascot's favorite 2019 musical biopic", labelColumn: 2, labelRow: 13, highlightColumn: `8/14`, highlightRow: 13},
        {number: "59", text: "___ acid, a protein building block", labelColumn: 14, labelRow: 13, highlightColumn: `8/14`, highlightRow: 13},
        {number: "60", text: 'Amazement', labelColumn: 1, labelRow: 14, highlightColumn: `8/14`, highlightRow: 13},
        {number: "61", text: "Instrument found in the Pitt Orchestra", labelColumn: 9, labelRow: 14, highlightColumn: `8/14`, highlightRow: 13},
        {number: "62", text: "Bread leavener", labelColumn: 1, labelRow: 15, highlightColumn: `8/14`, highlightRow: 13},
        {number: "63", text: "__ Just Not That Into You", labelColumn: 8, labelRow: 15, highlightColumn: `8/14`, highlightRow: 13},
      */
        ],
      Down: [
        {number: '1', text: "Type of dance", labelColumn: 2},
        {number: "2", text: "Gerard Way’s band, to fans", labelColumn: 9},
        {number: "3", text: "Rating system used by FiveThirtyEight’s NFL model", labelColumn: 3, labelRow: 2},
        {number: "4", text: 'Prepare apples for pie-making', labelColumn: 9, labelRow: 2},
        {number: "5", text: "German chainsaw manufacturer", labelColumn: 15, labelRow: 2},
        {number: "6", text: "Intend to", labelColumn: 1, labelRow: 3},
        {number: "7", text: `What’s missing after a shipwrek?`, labelColumn: 12, labelRow: 3},
        {number: "8", text: "Director DuVernay", labelColumn: 1, labelRow: 4},
        {number: "9", text: "They’re paid at funerals", labelColumn: 10, labelRow: 4},
        {number: "10", text: "Credit option", labelColumn: 1, labelRow: 5},
        {number: "11", text: "Fiddling emperor, or a Pitt physics professor", labelColumn: 9, labelRow: 5},
        {number: "12", text: "Hubbubs", labelColumn: 1, labelRow: 6},
        {number: "13", text: "", labelColumn: 7, labelRow: 6},
        {number: "14", text: "-ide prefix", labelColumn: 15, labelRow: 6},
        {number: "15", text: "", labelColumn: 7, labelRow: 7},
        {number: "16", text: "", labelColumn: 3, labelRow: 8},
        {number: "17", text: "", labelColumn: 7, labelRow: 8},
        {number: "18", text: "Secondary Pittsburgh airport code", labelColumn: 15, labelRow: 8},
        {number: "19", text: "", labelColumn: 2, labelRow: 9},
        {number: "20", text: "", labelColumn: 9, labelRow: 9},
        {number: "21", text: `"Forest giraffes" native to the Congo`, labelColumn: 13, labelRow: 9},
        {number: "22", text: "", labelColumn: 1, labelRow: 10},
        {number: "23", text: "", labelColumn: 11, labelRow: 10},
        {number: "24", text: "___porosis", labelColumn: 2, labelRow: 11},
        {number: "25", text: `Swahili word for freedom, and the source of a "Star Trek" name`, labelColumn: 5, labelRow: 11},
        {number: "26", text: "Beach bag", labelColumn: 12, labelRow: 11},
        {number: "27", text: "", labelColumn: 1, labelRow: 12},
        {number: "28", text: "", labelColumn: 7, labelRow: 12},
        {number: "29", text: "", labelColumn: 10, labelRow: 12},
        {number: "30", text: `"You’d Be So ___ Love" (Cole Porter)`, labelRow: 12, labelColumn: 14},
        {number: "31", text: "XVI + XXV", labelRow: 13, labelColumn: 6},
        {number: "32", text: "Romeo, to Benvolio", labelRow: 13, labelColumn: 10},
        {number: "33", text: "Before, to a poet", labelRow: 14, labelColumn: 1},
        {number: "34", text: 'Egyptian offering to the dead', labelRow: 14, labelColumn: 10},
        {number: "35", text: "Fameux last word", labelRow: 15, labelColumn: 1},
        {number: "36", text: "Sticky things", labelRow: 15, labelColumn: 8},
        {number: "37", text: "", labelColumn: 1, labelRow: 16},
        {number: "38", text: "Places to lay your feet to rest", labelColumn: 7, labelRow: 16},
        {number: "39", text: "Dave and Andy’s flavor, for short", labelColumn: 3, labelRow: 1},
        {number: "40", text: "", labelColumn: 4, labelRow: 1},
        {number: "41", text: "", labelColumn: 5, labelRow: 1},
        {number: "42", text: "", labelColumn: 6, labelRow: 1},
        {number: "43", text: "Viral throat infection type", labelColumn: 10, labelRow: 1},
        {number: "44", text: "___ thought", labelColumn: 11, labelRow: 1},
        {number: "45", text: "___ thought", labelColumn: 13, labelRow: 1},
        {number: "46", text: "Car giver?", labelColumn: 16, labelRow: 1},
        {number: "47", text: 'Have to pay again', labelColumn: 2, labelRow: 3},
        {number: "48", text: "Fairy tale beginnings", labelColumn: 7, labelRow: 3},
        {number: "49", text: "—", labelColumn: 14, labelRow: 3},
        {number: "50", text: "Pot before the kiln", labelColumn: 11, labelRow: 4},
        {number: "51", text: "Italian capital", labelColumn: 8, labelRow: 6},
        {number: "52", text: "—", labelColumn: 4, labelRow: 7},
        {number: "53", text: "—", labelColumn: 13, labelRow: 7},
        {number: "54", text: "Drunken sort", labelColumn: 5, labelRow: 8},
        {number: "55", text: "—", labelColumn: 16, labelRow: 8},
        {number: "56", text: "Jemison in space", labelColumn: 6, labelRow: 9},
        {number: "57", text: "Picnic crasher", labelColumn: 7, labelRow: 10},
        {number: "58", text: "Denials", labelColumn: 12, labelRow: 10},
        {number: "59", text: "—", labelColumn: 10, labelRow: 11},
        {number: "60", text: "—", labelColumn: 14, labelRow: 11},
        {number: "61", text: "—", labelColumn: 15, labelRow: 11},
        {number: "62", text: "—", labelColumn: 4, labelRow: 12},
        {number: "63", text: "—", labelColumn: 8, labelRow: 12},
        {number: "64", text: "—", labelColumn: 13, labelRow: 13},
        {number: "65", text: "—", labelColumn: 2, labelRow: 14},
        {number: "66", text: "—", labelColumn: 3, labelRow: 14},
        {number: "67", text: "—", labelColumn: 5, labelRow: 14},
        {number: "68", text: "—", labelColumn: 9, labelRow: 15},
      ]
    };

    const insertAfterBegin = (container, content) => {
      document.getElementsByClassName(container)[0]
        .insertAdjacentHTML('afterbegin', content);
    };

    window.onload = () => {
      // Load puzzle content
      var serializedPuzzle = [];
      for(var rowNumber = 0; rowNumber < puzzle.length; rowNumber++) {
        for(var columnNumber = 0; columnNumber < puzzle[rowNumber].length; columnNumber++) {
          if (puzzle[rowNumber] != 1 && columnNumber != 16) {
            const item = puzzle[rowNumber][columnNumber];
            const itemId = `item${rowNumber + 1}-${columnNumber + 1}`;
            console.log(itemId);

            if (item === null) {
              serializedPuzzle.push(`<span class="crossword-board__item--blank" id="${itemId}"></span>`);
            } else {
              serializedPuzzle.push(`<input id="${itemId}" class="crossword-board__item" type="text" minlength="1" maxlength="1" pattern="^[${item}${item.toUpperCase()}]{1}$" required="required" value="" />`);
            }
          }
        }
      }
      insertAfterBegin('crossword-board-for-real', serializedPuzzle.join(''));

      // Load puzzle clues
      const styleEl = document.createElement('style');
      document.head.appendChild(styleEl);
      const styleSheet = styleEl.sheet;

      for(var key in clues) {
        const keyLower = key.toLowerCase();
        var serializedClueLabels = [];
        var serializedClues = [`<dt class="crossword-clues__list-title"></dt>`];
        // ${key}

        clues[key].forEach((clue) => {
          //serializedClues.push(`<dd class="crossword-clues__list-item crossword-clues__list-item--${keyLower}-${clue.number}" data-number="${clue.number}">${clue.text}</dd>`);
          serializedClueLabels.push(`<span id="${keyLower}-${clue.number}" class="crossword-board__item-highlight crossword-board__item-highlight--${keyLower}-${clue.number}"></span>`);

          var labelStyleString = '';
          if (clue.labelColumn >= 1) {
            labelStyleString += `grid-column: ${clue.labelColumn}/${clue.labelColumn};`;
          }
          if (clue.labelRow >= 1) {
            labelStyleString += `grid-row: ${clue.labelRow}/${clue.labelRow};`;
          }
          styleSheet.insertRule(`.crossword-board__item-label--${clue.number} { ${labelStyleString} }`, styleSheet.cssRules.length);
        });

        insertAfterBegin(`crossword-board--highlight--${keyLower}`, serializedClueLabels.join(''));
        insertAfterBegin(`crossword-clues__list--${keyLower}`, serializedClues.join(''));
      }

      // Load labels
      const max = Math.max.apply(null, [clues.Across.sort((a, b) => { return b.number - a.number; })[0].number, clues.Down.sort((a, b) => { return b.number - a.number; })[0].number]);
      const serializedLabels = [];
      for(var i = 1; i <= max; i++) {
        serializedLabels.push(`<span id="label-${i}" class="crossword-board__item-label crossword-board__item-label--${i}"><span class="crossword-board__item-label-text">${i}</span></span>`);
      }
      insertAfterBegin('crossword-board--labels', serializedLabels.join(''));
    };
  </script>
</head>

<body>
  <input type="checkbox" name="checkvaliditems" id="checkvaliditems" />
  <label for="checkvaliditems">Check for valid squares</label>

  <div class="crossword-board-container">
    <div id="crossword-board" class="crossword-board crossword-board-for-real">
      <div class="crossword-board crossword-board--highlight crossword-board--highlight--across"></div>
      <div class="crossword-board crossword-board--highlight crossword-board--highlight--down"></div>
      <div class="crossword-board crossword-board--labels"></div>
      <div class="crossword-clues">
        <dl class="crossword-clues__list crossword-clues__list--across"></dl>
        <dl class="crossword-clues__list crossword-clues__list--down"></dl>
      </div>

      <div class="crossword-complete">well done, champ!</div>
    </div>
  </div>
</body>
